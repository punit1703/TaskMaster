{% load static %}

<div class="w-full bg-white rounded-xl p-6">
  <div class="flex items-center justify-between">
    <a href="{% url 'home' %}" class="font-semibold text-lg">Task Master</a>

    <div class="flex items-center">
      <!-- Search Box -->
      <div class="relative">
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
          <img src="{% static 'img/search_logo.png' %}" alt="Search" class="w-4 h-4" />
        </span>
        <form action="" method="GET">
            <input type="text" 
               name="q"
               class="border border-gray-300 rounded-l-lg pl-9 pr-3 py-2 focus:ring-2 focus:outline-none focus:ring-indigo-300 text-sm"
               placeholder="Search Tasks" />
        </form>
      </div>

      <!-- Sort Dropdown (hover only using Tailwind) -->
      <div class="relative group">
        <button
          class="flex items-center px-4 py-2 border border-gray-300 rounded-r-lg text-sm font-medium text-gray-700 hover:bg-gray-100">
          <svg class="w-4 h-4 mr-1 text-gray-500" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M6 12h12M9 17h6" />
          </svg>
          sort
          <svg class="w-4 h-4 ml-1 text-gray-500" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Dropdown Menu -->
        <div
          class="absolute left-0 z-50 mt-1 w-48 origin-top-right rounded-md border border-gray-200 bg-white shadow-lg ring-1 ring-black/5 opacity-0 group-hover:opacity-100 scale-95 group-hover:scale-100 transform transition-all duration-300 ease-out pointer-events-none group-hover:pointer-events-auto">
          <a href="{% url 'home' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">All</a>
          {% for category in categories %}
          <a href="{% url 'home' %}?q={{ category.name }}" 
             class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600">
            {{ category.name }}
          </a>
          {% empty %}
          <span class="block px-4 py-2 text-sm text-gray-400">No categories</span>
          {% endfor %}
        </div>
      </div>

      <!-- Profile Avatar -->
      <div class="hidden ml-4 md:block">
        <div class="relative group transform duration-300">
          <button type="button"
                  class="relative flex max-w-xs items-center rounded-full text-sm focus:outline-none">
            <span class="sr-only">Open user menu</span>
            <img class="size-14 rounded-full"
                 src="{% if request.user.id|divisibleby:2 %}
                      {% static 'img/img_2.png' %}
                      {% else %}
                      {% static 'img/img_1.png' %}
                      {% endif %} 
                    " alt="User" />
          </button>

          <!-- Profile Dropdown -->
          <div
            class="absolute right-0 z-50 mt-1 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black/5 hidden group-hover:block">
            <a href="{% url 'profile' request.user.id %}" class="block px-4 py-2 text-sm text-gray-700">Your Profile</a>
            <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-gray-700">Sign out</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<hr class="border-gray-300 mt-2">
